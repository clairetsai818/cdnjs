Lawnchair.adapter("dom",function(){var t=window.localStorage,e=function(e){return{key:e+"._index_",all:function(){var e=t.getItem(JSON.stringify(this.key));return e&&(e=JSON.parse(e)),null===e&&t.setItem(JSON.stringify(this.key),JSON.stringify([])),JSON.parse(t.getItem(JSON.stringify(this.key)))},add:function(e){var i=this.all();i.push(e),t.setItem(JSON.stringify(this.key),JSON.stringify(i))},del:function(e){for(var i=this.all(),n=[],r=0,s=i.length;r<s;r++)i[r]!=e&&n.push(i[r]);t.setItem(JSON.stringify(this.key),JSON.stringify(n))},find:function(t){for(var e=this.all(),i=0,n=e.length;i<n;i++)if(t===e[i])return i;return!1}}};return{valid:function(){return!!t&&function(){var e=!0,i=Math.random();try{t.setItem(i,i)}catch(t){e=!1}return t.removeItem(i),e}()},init:function(t,i){this.indexer=e(this.name),i&&this.fn(this.name,i).call(this,this)},save:function(e,i){var n=e.key?this.name+"."+e.key:this.name+"."+this.uuid();return delete e.key,t.setItem(n,JSON.stringify(e)),this.indexer.find(n)===!1&&this.indexer.add(n),e.key=n.slice(this.name.length+1),i&&this.lambda(i).call(this,e),this},batch:function(t,e){for(var i=[],n=0,r=t.length;n<r;n++)this.save(t[n],function(t){i.push(t)});return e&&this.lambda(e).call(this,i),this},keys:function(t){if(t){var e=this.name,i=this.indexer.all(),n=[];if(Array.prototype.map)n=i.map(function(t){return t.replace(e+".","")});else for(var r in i)n.push(r.replace(e+".",""));this.fn("keys",t).call(this,n)}return this},get:function(e,i){if(this.isArray(e)){for(var n=[],r=0,s=e.length;r<s;r++){var a=this.name+"."+e[r],h=t.getItem(a);h&&(h=JSON.parse(h),h.key=e[r]),n.push(h)}i&&this.lambda(i).call(this,n)}else{var a=this.name+"."+e,h=t.getItem(a);h&&(h=JSON.parse(h),h.key=e),i&&this.lambda(i).call(this,h)}return this},exists:function(t,e){var i=this.indexer.find(this.name+"."+t)!==!1;return this.lambda(e).call(this,i),this},all:function(e){for(var i,n,r=this.indexer.all(),s=[],a=0,h=r.length;a<h;a++)n=r[a],i=JSON.parse(t.getItem(n)),i.key=n.replace(this.name+".",""),s.push(i);return e&&this.fn(this.name,e).call(this,s),this},remove:function(e,i){var n=this;if(this.isArray(e)){var r,s=e.length,a=function(t){n.remove(e[t],function(){--s>0||i&&n.lambda(i).call(n)})};for(r=0;r<e.length;r++)a(r);return this}var h=this.name+"."+(e.key?e.key:e);return this.indexer.del(h),t.removeItem(h),i&&this.lambda(i).call(this),this},nuke:function(t){return this.all(function(e){for(var i=0,n=e.length;i<n;i++)this.remove(e[i]);t&&this.lambda(t).call(this)}),this}}}());
//# sourceMappingURL=dom.min.js.map