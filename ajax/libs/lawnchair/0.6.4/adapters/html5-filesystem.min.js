Lawnchair.adapter("html5-filesystem",function(e){var t=e.StorageInfo||e.webkitStorageInfo||{},n=e.TEMPORARY||t.TEMPORARY,a=e.PERSISTENT||t.PERSISTENT,i=e.BlobBuilder||e.WebKitBlobBuilder;i?console.error("this browser has not depricated BlobBuilder. you probably want to update."):console.log("this modern browser has depricated BlobBuilder, use Blob instead");var r=e.requestFileSystem||e.webkitRequestFileSystem||e.moz_requestFileSystem,o=e.FileError,l=function(e){var t;switch(e.code){case o.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case o.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case o.SECURITY_ERR:t="SECURITY_ERR";break;case o.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case o.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}console&&console.error(e,t)},c=function(e,t,n){var a=n||[];e.readEntries(function(n){n.length?c(e,t,a.concat(Array.prototype.slice.call(n))):t&&t(a.map(function(e){return e.name}))},l)},s={},u=function(e,t){var n=s[e.name];n?t(n):setTimeout(function(){u(e,t)},10)};return{valid:function(){return!!r},init:function(e,t){var i=this,o=function(e){l(e),t&&i.fn(i.name,t).call(i,i)};r("TEMPORARY"===e.storage?n:a,e.size||1073741824,function(n){n.root.getDirectory(e.name,{create:!0},function(n){s[e.name]=n,t&&i.fn(i.name,t).call(i,i)},o)},o)},keys:function(e){var t=this;return u(this,function(n){c(n.createReader(),function(n){e&&t.fn("keys",e).call(t,n)})}),this},save:function(e,t){var n=this,a=e.key||this.uuid();e.key=a;var r=function(e){l(e),t&&n.lambda(t).call(n)};return u(this,function(o){o.getFile(a,{create:!0},function(a){a.createWriter(function(a){if(a.onerror=r,a.onwriteend=function(){t&&n.lambda(t).call(n,e)},i){var o=new i;o.append(JSON.stringify(e)),a.write(o.getBlob("application/json"))}else a.write(new Blob([JSON.stringify(e)],{type:"application/json"}))},r)},r)}),this},batch:function(e,t){for(var n=this,a=[],i=0,r=e.length;i<r;i++)n.save(e[i],function(e){a.push(e),a.length===r&&t&&n.lambda(t).call(n,a)});return this},get:function(e,t){var n=this;if(this.isArray(e))for(var a=[],i=0,r=e.length;i<r;i++)n.get(e[i],function(e){e&&a.push(e),a.length===r&&t&&n.lambda(t).call(n,a)});else{var o=function(e){l(e),t&&n.lambda(t).call(n)};u(this,function(a){a.getFile(e,{create:!1},function(e){e.file(function(e){var a=new FileReader;a.onerror=o,a.onload=function(e){t&&n.lambda(t).call(n,JSON.parse(e.target.result))},a.readAsText(e)},o)},o)})}return this},exists:function(e,t){var n=this;return u(this,function(a){a.getFile(e,{create:!1},function(){t&&n.lambda(t).call(n,!0)},function(){t&&n.lambda(t).call(n,!1)})}),this},all:function(e){var t=this;return e&&this.keys(function(n){n.length?t.get(n,function(n){t.fn(t.name,e).call(t,n)}):t.fn(t.name,e).call(t,[])}),this},remove:function(e,t){var n=this,a=function(e){l(e),t&&n.lambda(t).call(n)};return u(this,function(i){i.getFile("string"==typeof e?e:e.key,{create:!1},function(e){e.remove(function(){t&&n.lambda(t).call(n)},a)},a)}),this},nuke:function(e){var t=this,n=0;return this.keys(function(a){if(a.length)for(var i=0,r=a.length;i<r;i++)t.remove(a[i],function(){n++,n===r&&e&&t.lambda(e).call(t)});else e&&t.lambda(e).call(t)}),this}}}(this));
//# sourceMappingURL=html5-filesystem.min.js.map