Lawnchair.adapter("chrome-storage",function(){var e=chrome.storage.local,t=function(t){return{key:t+"._index_",all:function(t){var n=this,i=function(){var t=JSON.stringify([]),i={};return i[n.key]=t,e.set(i),t=JSON.parse(t)};e.get(this.key,function(e){var n;if(Object.keys(e).length>0)for(itemKey in e)n=e[itemKey],n&&(n=JSON.parse(n)),null!==n&&"undefined"!=typeof n||(n=i()),t&&t(n);else n=i(),t(n)})},add:function(t){this.all(function(n){n.push(t);var i={};i[this.key]=JSON.stringify(n),e.set(i)})},del:function(t){var n=[];this.all(function(i){for(var a=0,r=i.length;a<r;a++)i[a]!=t&&n.push(i[a]);var s={};s[this.key]=JSON.stringify(n),e.set(s)})},find:function(e,t){this.all(function(n){for(var i=0,a=n.length;i<a;i++)e===n[i]&&t&&t(i);t&&t(!1)})}}};return{valid:function(){return!!e&&function(){var t=!0,n=Math.random();n=""+n;try{var i={};i[n]=n,e.set(i)}catch(e){t=!1}return e.remove(n),t}()},init:function(e,n){this.indexer=t(this.name),n&&this.fn(this.name,n).call(this,this)},save:function(t,n){var i=t.key?this.name+"."+t.key:this.name+"."+this.uuid();this.indexer.find(i)===!1&&this.indexer.add(i),delete t.key;var a={};return a[i]=JSON.stringify(t),e.set(a),t.key=i.slice(this.name.length+1),n&&this.lambda(n).call(this,t),this},batch:function(e,t){for(var n=[],i=0,a=e.length;i<a;i++)this.save(e[i],function(e){n.push(e)});return t&&this.lambda(t).call(this,n),this},keys:function(e){if(e){var t,n=this,i=this.name;this.indexer.all(function(a){t=a.map(function(e){return e.replace(i+".","")}),n.fn("keys",e).call(n,t)})}return this},get:function(t,n){var i,a=this;if(this.isArray(t))for(var r=[],s=0,h=t.length;s<h;s++){var l=this.name+"."+t[s];e.get(l,function(e){if(e)for(itemKey in e)i=e[itemKey],i=JSON.parse(i),i.key=itemKey.replace(a.name+".",""),r.push(i);s==h&&n&&a.lambda(n).call(a,r)})}else{var l=this.name+"."+t;e.get(l,function(e){if(e)for(itemKey in e)i=e[itemKey],i=JSON.parse(i),i.key=itemKey.replace(a.name+".","");n&&a.lambda(n).call(a,i)})}return this},exists:function(e,t){var n=this;return this.indexer.find(this.name+"."+e,function(e){e=e!==!1,n.lambda(t).call(n,e)}),this},all:function(t){var n=this;return this.indexer.all(function(i){var a,r,s=[];if(i.length>0)for(var h=0,l=i.length;h<l;h++)e.get(i[h],function(e){for(r in e)a=JSON.parse(e[r]),a.key=r.replace(n.name+".",""),s.push(a);h==l&&t&&n.fn(n.name,t).call(n,s)});else t&&n.fn(n.name,t).call(n,s)}),this},remove:function(t,n){var i=this.name+"."+(t.key?t.key:t);return this.indexer.del(i),e.remove(i),n&&this.lambda(n).call(this),this},nuke:function(e){return this.all(function(t){for(var n=0,i=t.length;n<i;n++)t[n]=""+t[n],this.remove(t[n]);e&&this.lambda(e).call(this)}),this}}}());
//# sourceMappingURL=chrome-storage.min.js.map