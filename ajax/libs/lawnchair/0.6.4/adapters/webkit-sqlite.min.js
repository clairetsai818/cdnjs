Lawnchair.adapter("webkit-sqlite",function(){var t=function(t,n){console.error("error in sqlite adaptor!",t,n)},n=function(){return new Date};return Function.prototype.bind||(Function.prototype.bind=function(t){var n=[].slice,i=n.call(arguments,1),r=this,e=function(){},a=function(){return r.apply(this instanceof e?this:t||{},i.concat(n.call(arguments)))};return e.prototype=r.prototype,a.prototype=new e,a}),{valid:function(){return!!window.openDatabase},init:function(n,i){var r=this,e=r.fn(r.name,i),a="CREATE TABLE IF NOT EXISTS "+this.record+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)",o=function(){if(e)return e.call(r,r)};if(e&&"function"!=typeof e)throw"callback not valid";this.db=openDatabase(this.name,"1.0.0",this.name,65536),this.db.transaction(function(t){t.executeSql(a,[])},t,o)},keys:function(n){var i=this.lambda(n),r=this,e="SELECT id FROM "+this.record+" ORDER BY timestamp DESC";return this.db.readTransaction(function(n){var a=function(t,n){if(0==n.rows.length)i.call(r,[]);else{for(var e=[],a=0,o=n.rows.length;a<o;a++)e.push(n.rows.item(a).id);i.call(r,e)}};n.executeSql(e,[],a,t)}),this},save:function(i,r,e){var a=this,o=(this.isArray(i)?i:[i]).map(function(t){return t.key||(t.key=a.uuid()),t}),s="INSERT OR REPLACE INTO "+this.record+" (value, timestamp, id) VALUES (?,?,?)",c=function(){r&&a.lambda(r).call(a,a.isArray(i)?o:o[0])},u=[],l=n();try{for(var h=0,f=o.length;h<f;h++)u[h]=[JSON.stringify(o[h]),l,o[h].key]}catch(n){throw t(n),n}return a.db.transaction(function(t){for(var n=0,i=o.length;n<i;n++)t.executeSql(s,u[n])},function(n,i){t(n,i)},c),this},batch:function(t,n){return this.save(t,n)},get:function(n,i){var r=this,e="",a=this.isArray(n)?n:[n];e="SELECT id, value FROM "+this.record+" WHERE id IN ("+a.map(function(){return"?"}).join(",")+")";var o=function(t,e){for(var o,s,c={},u=0,l=e.rows.length;u<l;u++)o=JSON.parse(e.rows.item(u).value),o.key=e.rows.item(u).id,c[o.key]=o;s=a.map(function(t){return c[t]}),r.isArray(n)||(s=s.length?s[0]:null),i&&r.lambda(i).call(r,s)};return this.db.readTransaction(function(n){n.executeSql(e,a,o,t)}),this},exists:function(n,i){var r="SELECT * FROM "+this.record+" WHERE id = ?",e=this,a=function(t,n){i&&e.fn("exists",i).call(e,n.rows.length>0)};return this.db.readTransaction(function(i){i.executeSql(r,[n],a,t)}),this},all:function(n){var i=this,r="SELECT * FROM "+this.record,e=[],a=this.fn(this.name,n)||void 0,o=function(t,n){if(0!=n.rows.length)for(var r=0,o=n.rows.length;r<o;r++){var s=JSON.parse(n.rows.item(r).value);s.key=n.rows.item(r).id,e.push(s)}a&&a.call(i,e)};return this.db.readTransaction(function(n){n.executeSql(r,[],o,t)}),this},remove:function(n,i){var r,e=this,a="DELETE FROM "+this.record+" WHERE id ",o=function(){i&&e.lambda(i).call(e)};return this.isArray(n)?(r=n,a+="IN ("+r.map(function(){return"?"}).join(",")+")"):(a+="= ?",r=[n]),r=r.map(function(t){return t.key?t.key:t}),this.db.transaction(function(n){n.executeSql(a,r,o,t)}),this},nuke:function(n){var i="DELETE FROM "+this.record,r=this,e=n?function(){r.lambda(n).call(r)}:function(){};return this.db.transaction(function(n){n.executeSql(i,[],e,t)}),this}}}());
//# sourceMappingURL=webkit-sqlite.min.js.map