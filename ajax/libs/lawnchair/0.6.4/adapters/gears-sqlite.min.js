!function(){if(!window.google||!google.gears){var e=null;if("undefined"!=typeof GearsFactory)e=new GearsFactory;else try{e=new ActiveXObject("Gears.Factory"),e.getBuildInfo().indexOf("ie_mobile")!=-1&&e.privateSetGlobalObject(this)}catch(t){"undefined"!=typeof navigator.mimeTypes&&navigator.mimeTypes["application/x-googlegears"]&&(e=document.createElement("object"),e.style.display="none",e.width=0,e.height=0,e.type="application/x-googlegears",document.documentElement.appendChild(e))}e&&(window.google||(google={}),google.gears||(google.gears={factory:e}))}}(),Lawnchair.adapter("gears-sqlite",{valid:function(){return window.google&&window.google.gears},init:function(e){var t=this,i=t.merge,a="string"==typeof arguments[0]?{table:e}:e;this.name=i("Lawnchair",a.name),this.table=i("field",a.table),this.db=google.gears.factory.create("beta.database"),this.db.open(this.name),this.db.execute("create table if not exists "+this.table+" (id NVARCHAR(32) UNIQUE PRIMARY KEY, value TEXT, timestamp REAL)")},save:function(e,t){var i=this,a=function(e,t){var a=void 0==e.key?i.uuid():e.key;delete e.key;i.db.execute("INSERT INTO "+i.table+" (id, value, timestamp) VALUES (?,?,?)",[a,i.serialize(e),i.now()]);void 0!=t&&(e.key=a,t(e))},o=function(e,t,a){i.db.execute("UPDATE "+i.table+" SET value=?, timestamp=? WHERE id=?",[i.serialize(t),i.now(),e]),void 0!=a&&(t.key=e,a(t))};void 0==e.key?a(e,t):this.get(e.key,function(i){var l=null!=i;if(l){var n=e.key;delete e.key,o(n,e,t)}else a(e,t)})},get:function(e,t){var i=this.db.execute("SELECT * FROM "+this.table+" WHERE id = ?",[e]);if(i.isValidRow()){var a=this.deserialize(i.field(1));a.key=e,i.close(),t(a)}else i.close(),t(null)},all:function(e){for(var t,i=this.terseToVerboseCallback(e),a=this.db.execute("SELECT * FROM "+this.table),o=[];a.isValidRow();)t=this.deserialize(a.field(1)),t.key=a.field(0),o.push(t),a.next();a.close(),i(o)},remove:function(e,t){this.db.execute("DELETE FROM "+this.table+" WHERE id = ?",["string"==typeof e?e:e.key]),t&&t()},nuke:function(e){return this.db.execute("DELETE FROM "+this.table),e&&e(),this}});
//# sourceMappingURL=gears-sqlite.min.js.map